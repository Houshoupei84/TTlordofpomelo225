<html>
<head>
    <meta http-equiv=Content-Type content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/easyui/themes/icon.css">
    <script type="text/javascript" src="/easyui/jquery.min.js"></script>
    <script type="text/javascript" src="/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/share.js"></script>
    <title></title>
</head>
<body  class="easyui-layout">
    <div style="margin:2px 0;">
        <a href="#" class="easyui-linkbutton" onclick="LoadData(1)">今天</a>
        <a href="#" class="easyui-linkbutton" onclick="LoadData(2)">昨天</a>
        <a href="#" class="easyui-linkbutton" onclick="LoadData(7)">近7天</a>
        <a href="#" class="easyui-linkbutton" onclick="LoadData(15)">近15天</a>
        <a href="#" class="easyui-linkbutton" onclick="LoadData(30)">近30天</a>

        <input class="easyui-datebox" data-options="onSelect:onSelect"></input>
        <input class="easyui-datebox" data-options="onSelect:onSelect2"></input>
        <a href="#" class="easyui-linkbutton" onclick="searchForDate()">按日期搜索</a>
    </div>
      <table id="dg" class="easyui-datagrid" title="Basic DataGrid" style="width:100%;height:100%"
            data-options="singleSelect:true,collapsible:true">
        <thead>
            <tr>
                <th data-options="field:'date',width:80">日期</th>
                <th data-options="field:'userTotal',width:100">用户总量</th>
                <th data-options="field:'userToday',width:80">新注册</th>
                <th data-options="field:'newPay',width:80">新增付费人数</th>
                <th data-options="field:'payRate',width:100">付费率</th>
                <th data-options="field:'playNum',width:60">牌局统计</th>
                <th data-options="field:'averagePay',width:60">平均付费</th>
                <th data-options="field:'payNum',width:60">付费次数</th>
                <th data-options="field:'giftNum',width:60">赠送</th>
            </tr>
        </thead>
    </table>
	<script type="text/javascript">
	  function LoadDate(startDate,endDate)
	  {
	     postJson("/admin/data",{startDate: startDate.getTime(),endDate: endDate.getTime()},
		   function(data)
		   {
		     $("#dg").datagrid("loadData",data);
               if(data.total==0){
                   $("#dg").datagrid("appendRow",{date:"暂无数据",userTotal:'',userToday:'',newPay:'',payRate:'',playNum:'',averagePay:'',payNum:'',giftNum:''});
               }
		   }
		 );
	  }
	  function LoadData(dayNum)
	  {
	      var endDate=new Date();
		  var startDate=new Date();
		  startDate.setDate(startDate.getDate()-(dayNum-1));
		  LoadDate(startDate,endDate);
	  }

      var startDate;
      var endDate;

      function onSelect2(date) {
          endDate = date;
      }

      function onSelect(date){
          startDate=date;
      }

      function searchForDate(){
          LoadDate(startDate,endDate);
      }
	  
	</script>
	
</body>
</html>