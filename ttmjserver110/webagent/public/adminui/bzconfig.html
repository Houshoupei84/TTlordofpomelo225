<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="../css/pagination.css"/>
    <script type="text/javascript" src="/easyui/jquery.min.js"></script>
    <script type="text/javascript" src="/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/share.js"></script>
    <title>补钻权限配置</title>
</head>
<body style="width:100%;height:100%">
<table>
    <tr>
        <td><label>单次为玩家补钻数量上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxUserSignNum" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为玩家补钻数量上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxUserSignDayNum" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为玩家补钻次数上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxUserDayCount"  readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>为玩家批量补钻每人数量上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxUserBatNum" readonly="readonly"  data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为玩家批量补钻次数上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxUserBatDayCount" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>单次为会员补钻数量上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxMemSignNum" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为会员补钻数量上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxMemSignDayNum" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为会员补钻次数上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxMemDayCount" readonly="readonly" data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>为会员批量补钻每人数量上线:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxMemBatNum"  data-options="require:true,min:0"/>
        </td>
    </tr>
    <tr>
        <td><label>每日为会员批量补钻次数上限:</label></td>
        <td>
            <input class="easyui-numberbox" id="maxMemBatDayCount"  data-options="require:true,min:0"/>
        </td>
    </tr>
</table>
</body>
<div style="margin:5px 0">
    <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-reload'" onclick="refresh()">刷新</a>
    <!--    <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-edit'" onclick="revise()">修改</a>-->
    <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-save'" onclick="confirm()">确认</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" data-options="iconCls:'icon-undo'" onclick="cancel()">取消</a>
</div>
<p style="line-height:32px">
    会员补钻扣除钻石开关:<input type="checkbox" id="checkbox_d1" class="chk_4" /><label for="checkbox_d1"></label>
</p>
<script>
    function refresh(){
        // 发送请求刷新数据
        postJson("/admin/getDiamondCfg ",{},function(rtn){
            var data=rtn.content;
            if(rtn.content){
                $("#maxUserSignNum").numberbox("setValue",data.diamond.maxUserSignNum);
                $("#maxUserSignDayNum").numberbox("setValue",data.diamond.maxUserSignDayNum);
                $("#maxUserDayCount").numberbox("setValue",data.diamond.maxUserDayCount);
                $("#maxUserBatNum").numberbox("setValue",data.diamond.maxUserBatNum);
                $("#maxUserBatDayCount").numberbox("setValue",data.diamond.maxUserBatDayCount);
                $("#maxMemSignNum").numberbox("setValue",data.diamond.maxMemSignNum);
                $("#maxMemSignDayNum").numberbox("setValue",data.diamond.maxMemSignDayNum);
                $("#maxMemDayCount").numberbox("setValue",data.diamond.maxMemDayCount);
                $("#maxMemBatDayCount").numberbox("setValue",data.diamond.maxMemBatDayCount);
                $("#maxMemBatNum").numberbox("setValue",data.diamond.maxMemBatNum);
                var checkSta=data.diamond.switchFlag;
                if(checkSta==0){
                    $("#checkbox_d1").attr("checked",false);
                }else{
                    $("#checkbox_d1").attr("checked",true);
                }
            }else{
                $.messager.alert("操作提示","请进行补钻配置","error");
            }
        });
    }
    refresh();
 /*   function revise(){
        $("input").attr("readonly",false);
    }*/
    function confirm(){
        if($("#checkbox_d1").is(':checked')){
            flag=1;
        }else{
            flag=0;
        }
        var msg={};
        //提交修改的数据以及内容
        msg.maxUserSignNum=parseInt($("#maxUserSignNum").numberbox("getValue"));
        msg.maxUserSignDayNum=parseInt($("#maxUserSignDayNum").numberbox("getValue"));
        msg.maxUserDayCount=parseInt($("#maxUserDayCount").numberbox("getValue"));
        msg.maxUserBatDayCount=parseInt($("#maxUserBatDayCount").numberbox("getValue"));
        msg.maxUserBatNum=parseInt($("#maxUserBatNum").numberbox("getValue"));
        msg.maxMemSignNum=parseInt($("#maxMemSignNum").numberbox("getValue"));
        msg.maxMemSignDayNum=parseInt($("#maxMemSignDayNum").numberbox("getValue"));
        msg.maxMemDayCount=parseInt($("#maxMemDayCount").numberbox("getValue"));
        msg.maxMemBatNum=parseInt($("#maxMemBatNum").numberbox("getValue"));
        msg.maxMemBatDayCount=parseInt($("#maxMemBatDayCount").numberbox("getValue"));
        msg.switchFlag=flag;
        if(isNaN(msg.maxUserSignNum)||isNaN(msg.maxUserSignDayNum)||isNaN(msg.maxUserDayCount)||isNaN(msg.maxMemSignNum)||isNaN(msg.maxMemSignDayNum)||isNaN(msg.maxMemDayCount)||isNaN(msg.maxMemBatDayCount)||isNaN( msg.maxUserBatNum)||isNaN(msg.maxMemBatNum)){
            $.messager.alert("操作提示","配置数据不能为空","error");
            return;
        }
        postJson("/admin/setDiamondCfg ",msg,function(rtn){
            if(rtn>0){
                $.messager.alert("操作提示","修改成功");
            }else {
                $.messager.alert("操作提示","修改配置失败"+rtn,"error");
            }
        })
    }
    var flag=0;
    function cancel(){
        refresh();
    }
    $(".chk_4").eq(0).click(function(){
        if($("#checkbox_d1").is(':checked')){
           flag=1;
        }else{
            flag=0;
        }
    })
</script>
</html>